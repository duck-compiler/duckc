use std::{parse_json};
use std::io::{File};

type Config = {
    app_name: String,
    version: String,
    plugins: String[],
    author: {
        name: String,
        phone: String,
    }[]
};

fn main() {
    const file = match File::open("./test_files/example.json") {
        File @file => file,
        .err => return,
    };

    const content = match file.read_str() {
        String @content => content,
        .err => return,
    };

    const config = match parse_json<Config>(content) {
        Config @conf => conf,
        .err => return,
    };

    std::io::println(config.app_name);
    for (plugin in config.plugins.iter()) {
        std::io::println(*plugin);
    }

    for (author in config.author.iter()) {
        std::io::println(author.name);
    }
}
