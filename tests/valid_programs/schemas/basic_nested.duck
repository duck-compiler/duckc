use go "encoding/json";

fn assert(expr: Bool, msg: String) {
    if (!expr) {
        std::error::panic(msg);
    }
}

schema Yoo = {
    abc: { x: String },
    hello: String,
}

fn main() {
    let str = "{\"hello\": \"Yoo\", \"abc\": { \"x\": \"abc\" } }";
    let x = Yoo().from_json(str);
    match x {
        { hello: String, abc: { x: String } } @yoo => assert(yoo.hello == "Yoo", "hello is not Yoo"),
        else => assert(false, "hello is not given"),
    }
}
