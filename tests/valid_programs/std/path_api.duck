use std::path::FilePath;

fn main() {
    std::assert(std::path::clean("./home/Hallo.txt") == "home/Hallo.txt", "path::clean");
    std::assert(std::path::join(["home", "dir", "hallo.txt"]) == "home/dir/hallo.txt", "path::join");
    std::assert(std::path::split("/home/split.txt").file == "split.txt", "path::split");

    std::assert(std::path::file_extension("/path/to/file.txt") == ".txt", "std::path::base");
    std::assert(std::path::ext("/path/to/file.txt") == ".txt", "std::path::base");
    std::assert(std::path::base("/path/to/file.txt") == "file.txt", "std::path::base");
    std::assert(std::path::is_absolute("/path/to/file.txt"), "std::path::is_absolute");
    std::assert(std::path::dir("/path/to/file.txt") == "/path/to", "std::path::dir");

    yoo();
}

fn yoo() {
    std::assert(FilePath::new("whatever/home.txt").filename() == "home.txt", "filename is not home.txt");
    std::assert(FilePath::new("whatever/home.txt").extension() == ".txt", "extension is not .txt");
    std::assert(FilePath::new("whatever/home.txt").size() == .err, "unknown file exist");
    std::assert(FilePath::new("whatever/home.txt").read().is_err(), "couldn't read non existing file");

    let f = FilePath::new("testyyy/file.txt")
        .ensure_dir()
        .write("hello");

    std::assert(f.size() == 5, "file size is not fivbeee");
    std::assert(f.read().is_ok(), "read should be an error");

    f.expect("file written");
    f.delete();

    std::assert(!f.exists(), "just deleted the file");
}
