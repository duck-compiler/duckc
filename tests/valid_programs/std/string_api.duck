use std::io::{print, println};
use std::string::{Symbols, UnicodeSymbols, AsciiSymbols, UNICODE_SUPPORTED};

fn assert(expr: Bool, msg: String) {
    if (!expr) {
        std::error::panic(msg);
    }
}

fn main() {
    ("hallo".len() == 5)->
    assert("length of 'hello' is not 5");
    ("hallo".count() == 5)->
    assert("count of 'hello' is not 5");
    (!"hallo".is_empty())->
    assert("the string 'hallo' is empty");
    ("".is_empty())->
    assert("the string '' is not empty");
    ("hello".contains("lo"))->
    assert("hello doesn't contain 'lo'");
    ("hallo".starts_with("ha"))->
    assert("hallo doesn't start with 'ha'");
    ("hallo".ends_with("lo"))->
    assert("hallo doesn't end with 'lo'");
    ("hallo".index_of("l") == 2)->
    assert("index_of('l') of string 'hallo' is not 2");
    ("hallo".to_upper() == "HALLO")->
    assert("'hallo' to uppper is not 'HALLO'");
    ("HALLO".to_lower() == "hallo")->
    assert("'HALLO'.to_lower() is not 'hallo'");
    ("  HALLO     ".trim() == "HALLO")->
    assert("'   HALLO    '.trim() is not 'HALLO'");
    ("HALLO".replace("O", "Y") == "HALLY")->
    assert("'HALLO'.replace('O', 'Y') is not 'HALLY'");
    ("HALLO".substring(1, 3) == "AL")->
    assert("'HALLO'.substring(1, 3) is not 'AL'");
    ("HALLO".repeat(2) == "HALLOHALLO")->
    assert("'HALLO'.repeat(2) is not 'HALLOHALLO'");
    ("5".to_int().unwrap() == 5)->
    assert("'5'.to_int() is not 5");

    std::io::println("red".red());
    std::io::println("green".green());
    std::io::println("yellow".yellow());
    std::io::println("blue".blue());
    std::io::println("magenta".magenta());
    std::io::println("cyan".cyan());
    std::io::println("gray".gray());
    std::io::println("white".white());
    std::io::println("orange rgb".rgb(242, 107, 10));

    std::io::println("on red".on_red());
    std::io::println("on green".on_green());
    std::io::println("on yellow".on_yellow());
    std::io::println("on blue".on_blue());
    std::io::println("on magenta".on_magenta());
    std::io::println("on cyan".on_cyan());
    std::io::println("on gray".on_gray());
    std::io::println("on white".on_white());
    std::io::println("on orange rgb".on_rgb(242, 107, 10));

    "HOLLO".to_bytes();
    std::io::println("all string api tests have passed");

    assert("   L".trim_left(" ").len() == 1, "trim left ducked");
    assert("   L   ".trim_left(" ").trim_right(" ").len() == 1, "trim right and left ducked");

    println(f"unicode suported: {UNICODE_SUPPORTED.to_string()}");

    Symbols::arrow_up()->print();
    Symbols::arrow_down()->print();
    Symbols::arrow_left()->print();
    Symbols::arrow_right()->print();
    Symbols::success()->print();
    Symbols::error()->print();
    Symbols::warning()->print();
    Symbols::info()->print();
    Symbols::corner_tl()->print();
    Symbols::line_h()->print();
    Symbols::t_top()->print();
    Symbols::line_h()->print();
    Symbols::corner_tr()->print();

    if (UNICODE_SUPPORTED) {
        assert(Symbols::success() == UnicodeSymbols::success(), "proxy failed to return unicode success");
        assert(Symbols::pointer() == UnicodeSymbols::pointer(), "proxy failed to return unicode pointer");
        assert(Symbols::t_left() == UnicodeSymbols::t_left(), "proxy failed to return unicode teee");
    } else {
        assert(Symbols::success() == AsciiSymbols::success(), "proxy failed to return ascii success");
        assert(Symbols::pointer() == AsciiSymbols::pointer(), "proxy failed to return ascii pointer");
        assert(Symbols::t_left() == AsciiSymbols::t_left(), "proxy failed to return ascii teee");
    }

    assert(UnicodeSymbols::arrow_right() == "→", "unicode right arrow failed");
    assert(AsciiSymbols::arrow_right() == ">", "ascii right arrow failed");
    assert(UnicodeSymbols::success() == "✔", "unicode success symbol failed");
    assert(AsciiSymbols::success() == "v", "ascii success symbol failed");
    assert(UnicodeSymbols::checkbox_on() == "☒", "unicode checkbox failed");
    assert(AsciiSymbols::checkbox_on() == "[x]", "ascii checkbox failed");

    assert(AsciiSymbols::t_top() == "+", "ascii t_top should be '+'");
    assert(UnicodeSymbols::t_top() == "┬", "Unicode t_top should be '┬'");

    println(f"\n{Symbols::heart().red()} YEAH")
}
